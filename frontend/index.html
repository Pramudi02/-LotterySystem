<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lottery System - Firebase Edition</title>
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBWEtzjum1mcPN3e61XghXaNC9qum7vhDw",
            authDomain: "lotterysystem-18963.firebaseapp.com",
            projectId: "lotterysystem-18963",
            storageBucket: "lotterysystem-18963.firebasestorage.app",
            messagingSenderId: "41637006495",
            appId: "1:41637006495:web:e7c9e6e3a57792bbc126aa",
            measurementId: "G-HKLLXJNVHS"
        };

        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
    </script>
    <script type="module" src="firebase-config.js"></script>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Additional styles for routing */
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }

        .navbar {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            padding: 15px 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .navbar-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar-brand {
            color: white;
            font-size: 1.5em;
            font-weight: bold;
            text-decoration: none;
        }

        .navbar-nav {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .nav-link.active {
            background-color: rgba(255, 255, 255, 0.2);
            font-weight: bold;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            color: white;
        }

        .logout-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .logout-btn:hover {
            background: #c0392b;
        }

        /* Ticket display styles */
        .tickets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .ticket-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid #e9ecef;
            transition: transform 0.3s ease;
        }

        .ticket-card:hover {
            transform: translateY(-5px);
        }

        .ticket-card.winner {
            border-color: #28a745;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        }

        .ticket-numbers {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 15px;
        }

        .number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #4facfe;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
        }

        .number.match {
            background: #28a745;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .ticket-info {
            text-align: center;
            color: #666;
            font-size: 14px;
        }

        .win-text {
            color: #28a745;
            font-weight: bold;
            font-size: 18px;
        }

        .loss-text {
            color: #dc3545;
        }

        .winning-number {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #ff6b6b;
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        /* Admin table styles */
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .admin-table th,
        .admin-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .admin-table th {
            background: #f8f9fa;
            font-weight: bold;
            color: #495057;
        }

        .admin-table tr:hover {
            background: #f8f9fa;
        }

        /* Form styles */
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }

            .navbar-nav {
                flex-direction: column;
                gap: 10px;
            }

            .tickets-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar" id="navbar" style="display: none;">
        <div class="navbar-content">
            <a href="#" class="navbar-brand" onclick="navigateTo('dashboard')">üé∞ Lottery System</a>
            <div class="navbar-nav">
                <a href="#" class="nav-link" id="nav-dashboard" onclick="navigateTo('dashboard')">Dashboard</a>
                <a href="#" class="nav-link" id="nav-play" onclick="navigateTo('play')">Play Lottery</a>
                <a href="#" class="nav-link" id="nav-results" onclick="navigateTo('results')">My Results</a>
                <a href="#" class="nav-link" id="nav-admin" onclick="navigateTo('admin')" style="display: none;">Admin Panel</a>
            </div>
            <div class="user-info">
                <span id="nav-user-info">Welcome!</span>
                <button class="logout-btn" onclick="handleLogout()">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Authentication Page -->
    <div id="auth-page" class="page active">
        <div class="auth-container">
            <div class="auth-header">
                <h1>üé∞ Lottery System</h1>
                <p class="auth-subtitle">Welcome to the Online Lottery System</p>
            </div>

            <!-- Auth Forms Container -->
            <div class="auth-card">
                <!-- Auth Tabs -->
                <div class="auth-tabs">
                    <button class="tab-btn active" onclick="showAuthForm('login', this)">
                        <span class="tab-icon">üîê</span>
                        Sign In
                    </button>
                    <button class="tab-btn" onclick="showAuthForm('signup', this)">
                        <span class="tab-icon">‚ú®</span>
                        Create Account
                    </button>
                </div>

                <!-- Login Form -->
                <div id="loginForm" class="auth-form active">
                    <h2>Sign In to Your Account</h2>
                    <div class="form-group">
                        <label for="loginEmail">Email Address</label>
                        <input type="email" id="loginEmail" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" placeholder="Enter your password" required>
                    </div>
                    <button class="btn btn-primary btn-full" onclick="handleLogin()">
                        <span class="btn-icon">üöÄ</span>
                        Sign In
                    </button>
                </div>

                <!-- Signup Form -->
                <div id="signupForm" class="auth-form">
                    <h2>Create New Account</h2>
                    <div class="form-group">
                        <label for="signupName">Display Name</label>
                        <input type="text" id="signupName" placeholder="Choose a display name" required>
                    </div>
                    <div class="form-group">
                        <label for="signupEmail">Email Address</label>
                        <input type="email" id="signupEmail" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">Password</label>
                        <input type="password" id="signupPassword" placeholder="Create a password" required>
                    </div>
                    <button class="btn btn-success btn-full" onclick="handleSignup()">
                        <span class="btn-icon">üéâ</span>
                        Create Account
                    </button>
                </div>

                <div id="authMessage" class="auth-message"></div>
            </div>

            <div class="auth-footer">
                <p>Get started with $100 bonus credit!</p>
                <p class="auth-note">Each lottery ticket costs $10 and gives you 5 random numbers (1-100)</p>
            </div>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboard-page" class="page">
        <div class="container">
            <h1>Welcome, <span id="dashboard-user-name"></span>!</h1>
            <div class="balance-info">
                <h3>Account Balance: $<span id="dashboard-balance">0.00</span></h3>
            </div>

            <div class="button-grid">
                <button class="btn btn-primary" onclick="navigateTo('play')">üé´ Play Lottery<br><small>Buy tickets & check results</small></button>
                <button class="btn btn-info" onclick="navigateTo('results')">üìä My Results<br><small>View your tickets</small></button>
                <button class="btn btn-warning" id="adminBtn" style="display: none;" onclick="navigateTo('admin')">‚öôÔ∏è Admin Panel<br><small>Manage lottery</small></button>
            </div>

            <div class="status">
                <h3>üìä System Status</h3>
                <div class="server-info">
                    Authentication: <span id="authStatus">Connected</span><br>
                    Database: <span id="dbStatus">Connected</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Play Lottery Page -->
    <div id="play-page" class="page">
        <div class="container">
            <h1>üé´ Play Lottery</h1>
            <div class="balance-info">
                <h3>Current Balance: $<span id="play-balance">0.00</span></h3>
            </div>

            <div class="ticket-section">
                <h3>Buy Lottery Ticket</h3>
                <p>Cost: $10.00 per ticket (5 random numbers between 1-100)</p>
                <button id="buyTicketBtn" class="btn btn-success">Buy Ticket ($10)</button>
                <div id="ticketStatus" class="status"></div>
            </div>
        </div>
    </div>

    <!-- Results Page -->
    <div id="results-page" class="page">
        <div class="container">
            <h1>üìä My Lottery Results</h1>
            <div class="balance-info">
                <h3>Current Balance: $<span id="results-balance">0.00</span></h3>
            </div>

            <div class="results-section">
                <h3>Your Tickets</h3>
                <button id="checkResultsBtn" class="btn btn-info">Refresh Results</button>
                <div id="resultsStatus" class="status"></div>
                <div id="resultsDisplay" class="results-display" style="display: none;">
                    <div id="userTickets"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Page -->
    <div id="admin-page" class="page">
        <div class="container">
            <h1>‚öôÔ∏è Admin Panel</h1>

            <div class="set-winner-section">
                <h3>Set Winning Number</h3>
                <div class="form-group">
                    <label for="winningNumber">Winning Number (1-100):</label>
                    <input type="number" id="winningNumber" min="1" max="100" placeholder="Enter winning number">
                </div>
                <button id="setWinnerBtn" class="btn btn-danger">Set Winning Number</button>
                <div id="setWinnerStatus" class="status"></div>
            </div>

            <div class="form-grid">
                <div class="tickets-section">
                    <h3>All Tickets</h3>
                    <button id="viewTicketsBtn" class="btn btn-info">View All Tickets</button>
                    <div id="ticketsStatus" class="status"></div>
                    <div id="ticketsDisplay" class="tickets-display" style="display: none;">
                        <table id="ticketsTable" class="admin-table">
                            <thead>
                                <tr>
                                    <th>Ticket ID</th>
                                    <th>User</th>
                                    <th>Numbers</th>
                                    <th>Purchase Time</th>
                                </tr>
                            </thead>
                            <tbody id="ticketsBody">
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="users-section">
                    <h3>All Users</h3>
                    <button id="viewUsersBtn" class="btn btn-info">View All Users</button>
                    <div id="usersStatus" class="status"></div>
                    <div id="usersDisplay" class="users-display" style="display: none;">
                        <table id="usersTable" class="admin-table">
                            <thead>
                                <tr>
                                    <th>Email</th>
                                    <th>Display Name</th>
                                    <th>Balance</th>
                                    <th>Tickets</th>
                                </tr>
                            </thead>
                            <tbody id="usersBody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="results-section">
                <h3>Lottery Results</h3>
                <button id="announceResultsBtn" class="btn btn-warning">Refresh Results</button>
                <div id="announceStatus" class="status"></div>
                <div id="currentWinner" class="winner-display">
                    <h4>Current Winning Number: <span id="winnerNumber">Not set</span></h4>
                </div>
            </div>
        </div>
    </div>

    <!-- Messages -->
    <div class="messages-section">
        <div id="messages" class="messages-container"></div>
    </div>

    <script type="module">
        import { firebaseAuth, firebaseDB } from './firebase-config.js';

        let currentUser = null;
        let currentPage = 'auth';
        let isAdmin = false;

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Check authentication
            firebaseAuth.onAuthStateChange(async (user) => {
                if (user) {
                    currentUser = user;
                    await loadUserData();
                    navigateTo('dashboard');
                } else {
                    currentUser = null;
                    navigateTo('auth');
                }
            });

            // Set up event listeners
            setupEventListeners();
        });

        function setupEventListeners() {
            // Buy ticket
            document.getElementById('buyTicketBtn').addEventListener('click', buyTicket);

            // Check results
            document.getElementById('checkResultsBtn').addEventListener('click', checkResults);

            // Admin functions
            document.getElementById('setWinnerBtn').addEventListener('click', setWinningNumber);
            document.getElementById('viewTicketsBtn').addEventListener('click', viewAllTickets);
            document.getElementById('viewUsersBtn').addEventListener('click', viewAllUsers);
            document.getElementById('announceResultsBtn').addEventListener('click', refreshResults);
        }

        // Navigation function
        function navigateTo(page) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));

            // Show target page
            document.getElementById(page + '-page').classList.add('active');

            // Update navigation
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            const navLink = document.getElementById('nav-' + page);
            if (navLink) navLink.classList.add('active');

            // Update navbar visibility
            if (page === 'auth') {
                document.getElementById('navbar').style.display = 'none';
            } else {
                document.getElementById('navbar').style.display = 'block';
            }

            currentPage = page;

            // Load page-specific data
            if (page !== 'auth') {
                loadPageData(page);
            }
        }

        // Load user data
        async function loadUserData() {
            if (!currentUser) return;

            const result = await firebaseDB.getUserData(currentUser.uid);
            if (result.success) {
                const userData = result.data;
                isAdmin = userData.isAdmin || false;

                // Update all balance displays
                document.querySelectorAll('[id$="-balance"]').forEach(el => {
                    el.textContent = userData.balance?.toFixed(2) || '0.00';
                });

                // Update user name displays
                document.querySelectorAll('[id*="-user-name"], #nav-user-info').forEach(el => {
                    el.textContent = userData.displayName || currentUser.email;
                });

                // Show/hide admin features
                const adminElements = document.querySelectorAll('#adminBtn, #nav-admin, #admin-page');
                adminElements.forEach(el => {
                    el.style.display = isAdmin ? 'block' : 'none';
                });
            } else {
                showMessage('Failed to load user data: ' + result.error, 'error');
            }
        }

        // Load page-specific data
        async function loadPageData(page) {
            switch (page) {
                case 'results':
                    await checkResults();
                    break;
                case 'admin':
                    if (isAdmin) {
                        await loadWinningNumber();
                    }
                    break;
            }
        }

        // Show auth form
        function showAuthForm(formType, buttonElement) {
            // Hide all forms
            document.querySelectorAll('.auth-form').forEach(form => form.classList.remove('active'));

            // Show selected form
            document.getElementById(formType + 'Form').classList.add('active');

            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));

            // Activate the clicked button
            if (buttonElement) {
                buttonElement.classList.add('active');
            }
        }

        // Handle login
        async function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                showMessage('Please fill in all fields', 'error');
                return;
            }

            const result = await firebaseAuth.signIn(email, password);
            if (result.success) {
                showMessage('Login successful!', 'success');
            } else {
                showMessage(result.error, 'error');
            }
        }

        // Handle signup
        async function handleSignup() {
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;

            if (!name || !email || !password) {
                showMessage('Please fill in all fields', 'error');
                return;
            }

            const result = await firebaseAuth.signUp(email, password, name);
            if (result.success) {
                showMessage('Account created successfully!', 'success');
            } else {
                showMessage(result.error, 'error');
            }
        }

        // Handle logout
        async function handleLogout() {
            const result = await firebaseAuth.signOut();
            if (result.success) {
                navigateTo('auth');
            } else {
                showMessage(result.error, 'error');
            }
        }

        // Buy ticket
        async function buyTicket() {
            if (!currentUser) {
                showMessage('Please log in first', 'error');
                return;
            }

            const ticketBtn = document.getElementById('buyTicketBtn');
            ticketBtn.disabled = true;
            ticketBtn.textContent = 'Processing...';

            const result = await firebaseDB.buyTicket(currentUser.uid);
            if (result.success) {
                showMessage(`Ticket purchased! Numbers: ${result.numbers.join(', ')}`, 'success');
                await loadUserData(); // Refresh balance
            } else {
                showMessage('Failed to buy ticket: ' + result.error, 'error');
            }

            ticketBtn.disabled = false;
            ticketBtn.textContent = 'Buy Ticket ($10)';
        }

        // Check results
        async function checkResults() {
            if (!currentUser) {
                showMessage('Please log in first', 'error');
                return;
            }

            const resultsBtn = document.getElementById('checkResultsBtn');
            resultsBtn.disabled = true;
            resultsBtn.textContent = 'Checking...';

            try {
                // Get user's tickets
                const ticketsResult = await firebaseDB.getUserTickets(currentUser.uid);
                if (!ticketsResult.success) {
                    showMessage('Failed to load tickets: ' + ticketsResult.error, 'error');
                    return;
                }

                // Get winning number
                const winningResult = await firebaseDB.getWinningNumber();
                if (!winningResult.success) {
                    showMessage('Failed to get winning number: ' + winningResult.error, 'error');
                    return;
                }

                const winningNumber = winningResult.winningNumber;
                const tickets = ticketsResult.tickets;

                // Display results
                displayResults(tickets, winningNumber);

                if (tickets.length === 0) {
                    showMessage('No tickets found. Buy a ticket first!', 'info');
                } else {
                    showMessage(`Results checked! Winning number: ${winningNumber || 'Not set'}`, 'success');
                }
            } catch (error) {
                showMessage('Error checking results: ' + error.message, 'error');
            }

            resultsBtn.disabled = false;
            resultsBtn.textContent = 'Refresh Results';
        }

        // Display results
        function displayResults(tickets, winningNumber) {
            const resultsDisplay = document.getElementById('resultsDisplay');
            const userTickets = document.getElementById('userTickets');

            if (tickets.length === 0) {
                userTickets.innerHTML = '<p>No tickets purchased yet.</p>';
                resultsDisplay.style.display = 'block';
                return;
            }

            let html = '<div class="tickets-grid">';
            html += `<div class="winning-number">üéØ Winning Number: ${winningNumber || 'Not set yet'}</div>`;

            tickets.forEach(ticket => {
                const won = winningNumber && ticket.numbers.includes(winningNumber);
                const prize = won ? 100 : 0;

                html += `
                    <div class="ticket-card ${won ? 'winner' : ''}">
                        <div class="ticket-numbers">
                            ${ticket.numbers.map(num =>
                                `<span class="number ${num === winningNumber ? 'match' : ''}">${num}</span>`
                            ).join('')}
                        </div>
                        <div class="ticket-info">
                            <div>Purchased: ${ticket.purchaseTime.toLocaleString()}</div>
                            <div class="${won ? 'win-text' : 'loss-text'}">
                                ${won ? `üéâ Winner! Prize: $${prize}` : 'No win this time'}
                            </div>
                        </div>
                    </div>
                `;
            });

            html += '</div>';
            userTickets.innerHTML = html;
            resultsDisplay.style.display = 'block';
        }

        // Admin functions
        async function setWinningNumber() {
            if (!isAdmin) {
                showMessage('Admin access required', 'error');
                return;
            }

            const number = parseInt(document.getElementById('winningNumber').value);
            if (!number || number < 1 || number > 100) {
                showMessage('Please enter a valid number between 1 and 100', 'error');
                return;
            }

            const btn = document.getElementById('setWinnerBtn');
            btn.disabled = true;
            btn.textContent = 'Setting...';

            const result = await firebaseDB.setWinningNumber(number);
            if (result.success) {
                showMessage(`Winning number set to ${number}`, 'success');
                document.getElementById('winnerNumber').textContent = number;
                document.getElementById('winningNumber').value = '';
            } else {
                showMessage('Failed to set winning number: ' + result.error, 'error');
            }

            btn.disabled = false;
            btn.textContent = 'Set Winning Number';
        }

        async function viewAllTickets() {
            if (!isAdmin) {
                showMessage('Admin access required', 'error');
                return;
            }

            const btn = document.getElementById('viewTicketsBtn');
            btn.disabled = true;
            btn.textContent = 'Loading...';

            const result = await firebaseDB.getAllTickets();
            if (result.success) {
                displayTickets(result.tickets);
                document.getElementById('ticketsDisplay').style.display = 'block';
                showMessage(`Loaded ${result.tickets.length} tickets`, 'success');
            } else {
                showMessage('Failed to load tickets: ' + result.error, 'error');
            }

            btn.disabled = false;
            btn.textContent = 'View All Tickets';
        }

        async function viewAllUsers() {
            if (!isAdmin) {
                showMessage('Admin access required', 'error');
                return;
            }

            const btn = document.getElementById('viewUsersBtn');
            btn.disabled = true;
            btn.textContent = 'Loading...';

            const result = await firebaseDB.getAllUsers();
            if (result.success) {
                displayUsers(result.users);
                document.getElementById('usersDisplay').style.display = 'block';
                showMessage(`Loaded ${result.users.length} users`, 'success');
            } else {
                showMessage('Failed to load users: ' + result.error, 'error');
            }

            btn.disabled = false;
            btn.textContent = 'View All Users';
        }

        async function refreshResults() {
            await loadWinningNumber();
            showMessage('Results refreshed', 'success');
        }

        async function loadWinningNumber() {
            const result = await firebaseDB.getWinningNumber();
            if (result.success) {
                document.getElementById('winnerNumber').textContent = result.winningNumber || 'Not set';
            }
        }

        function displayTickets(tickets) {
            const tbody = document.getElementById('ticketsBody');
            tbody.innerHTML = '';

            tickets.forEach(ticket => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${ticket.id.substring(0, 8)}...</td>
                    <td>${ticket.userId.substring(0, 8)}...</td>
                    <td>${ticket.numbers.join(', ')}</td>
                    <td>${ticket.purchaseTime.toLocaleString()}</td>
                `;
                tbody.appendChild(row);
            });
        }

        function displayUsers(users) {
            const tbody = document.getElementById('usersBody');
            tbody.innerHTML = '';

            users.forEach(user => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.email}</td>
                    <td>${user.displayName || 'N/A'}</td>
                    <td>$${user.balance?.toFixed(2) || '0.00'}</td>
                    <td>${user.ticketCount || 0}</td>
                `;
                tbody.appendChild(row);
            });
        }

        // Show message
        function showMessage(text, type = 'info') {
            // For auth page, use dedicated message area
            if (currentPage === 'auth') {
                const authMessage = document.getElementById('authMessage');
                authMessage.textContent = text;
                authMessage.className = `auth-message ${type} show`;

                // Auto hide after 5 seconds
                setTimeout(() => {
                    authMessage.classList.remove('show');
                }, 5000);
            } else {
                // For other pages, use the floating messages
                const messages = document.getElementById('messages');
                const messageEl = document.createElement('div');
                messageEl.className = `message ${type}`;
                messageEl.textContent = text;
                messages.appendChild(messageEl);

                // Auto remove after 5 seconds
                setTimeout(() => {
                    messageEl.remove();
                }, 5000);
            }
        }

        // Make functions global
        window.showAuthForm = showAuthForm;
        window.handleLogin = handleLogin;
        window.handleSignup = handleSignup;
        window.handleLogout = handleLogout;
        window.navigateTo = navigateTo;
    </script>
</body>
</html>